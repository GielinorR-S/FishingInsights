# Root .htaccess for SPA routing

RewriteEngine On
RewriteBase /

# Don't rewrite API endpoints
RewriteCond %{REQUEST_URI} !^/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [L]

# Security: Deny access to config files
<FilesMatch "^(config\.local\.php|\.env)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Security: Deny access to data directory if inside web root
<IfModule mod_rewrite.c>
    RewriteRule ^data/ - [F,L]
</IfModule>

