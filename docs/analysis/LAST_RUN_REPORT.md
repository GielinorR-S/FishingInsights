# Last Run Report

**Generated:** 2025-12-26  
**Generated At:** 2025-12-26 06:53:14  
**Status:** ✅ All checks passed

---

## 1. Repo State

### Current Branch

```
main
```

### Latest Commit Hash

```
a6caac5484d849a85c64992627f8b3d719b6244d
```

### Short Hash

```
a6caac5
```

### Working Directory Status

⚠️ **Dirty** - Uncommitted changes detected

**Changed/Untracked Files:**

- `??` `api/species.php`
- `??` `api/todays_best.php`
- `??` `app/src/components/ForecastDayCard.tsx`
- `??` `app/src/components/SpeciesSelector.tsx`
- `??` `app/src/components/icons.tsx`
- `??` `app/src/contexts/PreferencesContext.tsx`
- `??` `app/src/contexts/TargetSpeciesContext.tsx`
- `??` `data/locations.csv`
- `??` `scripts/check_location_duplicates.php`
- `??` `scripts/validate_locations_csv.php`

### Last 5 Commits

- `a6caac5 - UI baseline: mobile-first layout, cards, banners, nav polish`
- `0710245 - Update last run report`
- `8b5acd5 - Fix scripts base URL/path (support / and /api) + update docs`
- `c779f44 - PWA icons + maskable, offline UX, docs state update`
- `cc21792 - API contract lock, golden sample, contract verification, perf + cache complete`

## 2. Test Results

### Contract Verification

**Status:** ✅ PASS
**Exit Code:** 0

**Output:**

```
FishingInsights API Contract Verification
==========================================

Test 1: Load golden sample...
  PASS: Golden sample loaded

Test 2: Fetch live response...
  PASS: Live response fetched

Test 3: Top-level structure...
  PASS: error = false

Test 4: Data object structure...
  PASS: timezone = Australia/Melbourne

Test 5: Forecast array length...
  PASS: forecast length = 7

Test 6: First date equals Melbourne today...
  PASS: forecast[0].date = 2025-12-26 (Melbourne today)

Test 7: Forecast day structure (first day)...
  PASS: score in range 0-100 (84)

Test 8: All days have required fields...
  PASS: All 7 days have required fields and valid scores

==========================================
Summary: 27 passed, 0 failed

All contract checks passed!
```

### Smoke Tests

**Status:** ✅ PASS
**Exit Code:** 0

**Output:**

```
FishingInsights Backend Smoke Test
====================================
Base URL: http://127.0.0.1:8001
Base Path: (root)

Test 1: Health Check...
  PASS: status = ok
  PASS: has_pdo_sqlite = true
  PASS: can_write_db = true

Test 2: Forecast Endpoint...
  PASS: forecast length = 7 days
  PASS: forecast structure valid
  Sample: Date = 2025-12-26, Score = 84

Test 3: API Contract Verification...
  PASS: Contract verification passed
  Summary: 27 passed, 0 failed
  All contract checks passed!

====================================
Summary: 6 passed, 0 failed

All tests passed!
```

## 3. Summary

**Overall Status:** ✅ All checks passed

**Test Results:**

- Contract Verification: ✅ PASS
- Smoke Tests: ✅ PASS

---

**Report Generated By:** `scripts/run_checks_and_report.php`
**To Regenerate:** Run `php scripts/run_checks_and_report.php`
